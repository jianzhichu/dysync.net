# dysync.net - æŠ–éŸ³åŒæ­¥å·¥å…·ï¼ˆæ”¶è—/å–œæ¬¢/æŒ‡å®šåšä¸»ï¼Œæ— ç¼å¯¹æ¥Emby/Jellyfinï¼‰

`dysync.net` æ˜¯ä¸€æ¬¾åŸºäº **.NET Core 6.0** å’Œ **Vue** å¼€å‘çš„å·¥å…·ï¼Œç”¨äºåŒæ­¥æŠ–éŸ³æ”¶è—å¤¹ã€ã€Œæˆ‘å–œæ¬¢ã€çš„è§†é¢‘åŠæŒ‡å®šåšä¸»ä½œå“ï¼Œè§£å†³ä¸ªäººæ”¶è—è§†é¢‘æ˜“å¤±æ•ˆçš„é—®é¢˜ã€‚æ”¯æŒå¤šè´¦å·åŒæ­¥ï¼Œå†…ç½®è§†é¢‘ä¿¡æ¯åˆ®å‰ŠåŠŸèƒ½ï¼ŒåŒæ­¥åçš„è§†é¢‘å¯ç›´æ¥åœ¨ Emby æˆ– Jellyfin ä¸­æ’­æ”¾ã€‚

> ğŸ”§ é—®é¢˜åé¦ˆï¼šä½¿ç”¨ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æ·»åŠ  QQï¼š279225040 å’¨è¯¢

---

### ğŸ“º Emby æ’­æ”¾æ•ˆæœé¢„è§ˆ
![Embyæ’­æ”¾æ•ˆæœ](docs/emby.png)

---

## ğŸ“Œ 1. è·å–æŠ–éŸ³å…³é”®ä¿¡æ¯ï¼ˆå¿…åšï¼åŒæ­¥æ ¸å¿ƒå‡­è¯ï¼‰
Cookie åŠ `sec_user_id` æ˜¯åŒæ­¥åŠŸèƒ½çš„æ ¸å¿ƒï¼Œéœ€ä¸¥æ ¼æŒ‰æ­¥éª¤è·å–ï¼Œé¿å…é—æ¼æˆ–é”™è¯¯ã€‚

### 1.1 æå–æŠ–éŸ³ Cookie
1. æ‰“å¼€ **æŠ–éŸ³ç½‘é¡µç‰ˆ** (https://www.douyin.com/) å¹¶ç™»å½•ç›®æ ‡è´¦å·ï¼›
2. è¿›å…¥ã€Œæˆ‘çš„æ”¶è—ã€é¡µé¢ï¼Œç¡®ä¿é¡µé¢åŠ è½½å®Œæˆï¼›
3. æŒ‰ `F12` æ‰“å¼€æµè§ˆå™¨ã€Œå¼€å‘è€…å·¥å…·ã€ï¼Œåˆ‡æ¢åˆ°ã€ŒNetwork (ç½‘ç»œ)ã€æ ‡ç­¾ï¼›
4. åˆ·æ–°é¡µé¢ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥ `v1/web/aweme/listcollection` ç­›é€‰è¯·æ±‚ï¼›
5. ç‚¹å‡»ä»»æ„ä¸€æ¡ç­›é€‰ç»“æœï¼Œåœ¨å³ä¾§ã€ŒHeaders (æ ‡å¤´)ã€ä¸­æ‰¾åˆ° `Cookie` å­—æ®µï¼Œ**å®Œæ•´å¤åˆ¶æ•´æ®µå†…å®¹**ï¼ˆä¸å¯åˆ å‡å­—ç¬¦ï¼‰ã€‚

![è·å–Cookieæ­¥éª¤](docs/getcookies.png)
![æå–ä¸ªäººsec_user_id](docs/secUserId.png)

### 1.2 æå– `sec_user_id`ï¼ˆä¸ªäºº/æŒ‡å®šåšä¸»ï¼‰
- **ä¸ªäºº sec_user_id**ï¼ˆåŒæ­¥è‡ªå·±çš„æ”¶è—/å–œæ¬¢ç”¨ï¼‰ï¼š  
  è¿›å…¥è‡ªå·±çš„æŠ–éŸ³ä¸»é¡µï¼Œæµè§ˆå™¨åœ°å€æ ä¸­ `sec_user_id=` åçš„å­—ç¬¦ä¸²å³ä¸ºä¸ªäºº IDï¼ˆå¦‚ `https://www.douyin.com/user/sec_user_id=xxx`ï¼‰ã€‚
- **åšä¸» sec_user_id**ï¼ˆåŒæ­¥æŒ‡å®šåšä¸»ä½œå“ç”¨ï¼‰ï¼š  
  1. è¿›å…¥ç›®æ ‡åšä¸»ä¸»é¡µï¼›  
  2. æ–¹å¼1ï¼šç›´æ¥å¤åˆ¶åœ°å€æ ä¸­ `user/` åˆ°  `?from_tab_name`ä¸­é—´éƒ¨åˆ†å†…å®¹å³æ˜¯åšä¸»çš„ `sec_user_id`ï¼›  
  3. æ–¹å¼2ï¼šæŒ‰ `F12` â†’ ã€ŒNetworkã€â†’ ä»»æ„è¯·æ±‚ â†’ ã€ŒHeadersã€â†’ æå– `sec_user_id` å­—æ®µå€¼ã€‚

> âš ï¸ é£æ§æç¤ºï¼šåŒæ­¥åšä¸»ä½œå“æ—¶ï¼Œ**æ…ç”¨å¼€å¯å…¨é‡åŒæ­¥**ï¼ˆä¸€æ¬¡æ€§ä¸‹è½½è¿‡å¤šæ˜“è¢«æŠ–éŸ³é™åˆ¶è®¿é—®ï¼‰ã€‚

![æå–åšä¸»sec_user_id](docs/upers-uid.png)

---

## ğŸ“ 2. è·¯å¾„æ˜ å°„è§„åˆ™ï¼ˆæ ¸å¿ƒï¼é”™é…ä¼šå¯¼è‡´æ— æ³•è®¿é—®/æ•°æ®ä¸¢å¤±ï¼‰
ä¸ºå®ç°è§†é¢‘åœ¨ Emby/Jellyfin ä¸­æ­£å¸¸æ’­æ”¾åŠæ•°æ®æŒä¹…åŒ–ï¼Œéœ€æ­£ç¡®é…ç½®æœ¬åœ°è·¯å¾„ä¸å®¹å™¨è·¯å¾„çš„æ˜ å°„ï¼š

| å­˜å‚¨ç±»å‹         | å®¹å™¨å†…è·¯å¾„       | æœ¬åœ°è·¯å¾„é…ç½®è¦æ±‚                                                                 | ç”¨é€”è¯´æ˜                     |
|------------------|------------------|----------------------------------------------------------------------------------|------------------------------|
| ä¸ªäººæ”¶è—è§†é¢‘     | `/app/collect`   | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå¦‚ NASï¼š`/volume1/æŠ–éŸ³/æ”¶è—`ã€ç”µè„‘ï¼š`D:/æŠ–éŸ³/æ”¶è—`ï¼‰             | å­˜å‚¨åŒæ­¥åçš„æ”¶è—è§†é¢‘         |
| ä¸ªäººå–œæ¬¢è§†é¢‘     | `/app/favorite`  | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå»ºè®®ä¸æ”¶è—è§†é¢‘è·¯å¾„åŒºåˆ†ï¼Œå¦‚ `/volume1/æŠ–éŸ³/å–œæ¬¢`ï¼‰                 | å­˜å‚¨åŒæ­¥åçš„ã€Œæˆ‘å–œæ¬¢ã€è§†é¢‘   |
| æŒ‡å®šåšä¸»è§†é¢‘     | `/app/uper`      | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå¦‚ `/volume1/æŠ–éŸ³/åšä¸»ä½œå“`ï¼‰                                     | å­˜å‚¨åŒæ­¥åçš„åšä¸»è§†é¢‘         |
| æ•°æ®åº“æ–‡ä»¶       | `/app/db`        | æ˜ å°„åˆ°æœ¬åœ°ç¨³å®šç›®å½•ï¼ˆå¦‚ `/volume1/æŠ–éŸ³/å·¥å…·æ•°æ®åº“`ï¼‰                               | æŒä¹…åŒ–é…ç½®ã€åŒæ­¥è®°å½•ï¼ˆé˜²æ­¢å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ï¼‰ |
| å¤šè´¦å·è§†é¢‘ï¼ˆå¯é€‰ï¼‰| `/app/user1`/`/app/user2` ç­‰ | ä¸ºæ¯ä¸ªè´¦å·åˆ†é…ç‹¬ç«‹æœ¬åœ°è·¯å¾„ï¼ˆå¦‚ `/volume1/æŠ–éŸ³/è´¦å·A`ã€`/volume1/æŠ–éŸ³/è´¦å·B`ï¼‰ | å®ç°å¤šè´¦å·éš”ç¦»åŒæ­¥           |

> âœ… å…³é”®æ³¨æ„ï¼š  
> 1. æœ¬åœ°è·¯å¾„éœ€ä¸åç»­åå°ã€ŒæŠ–éŸ³æˆæƒã€é¡µé¢é…ç½®çš„ã€Œæ–‡ä»¶å­˜å‚¨è·¯å¾„ã€**å®Œå…¨ä¸€è‡´**ï¼›  
> 2. æœªé…ç½®è·¯å¾„æ˜ å°„æ—¶ï¼Œæ–‡ä»¶ä»…å­˜äºå®¹å™¨å†…éƒ¨ï¼ŒEmby/Jellyfin æ— æ³•è®¿é—®ï¼Œä¸”å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ã€‚

![è·¯å¾„é…ç½®ç¤ºä¾‹](docs/upersuidset.png)

---

## ğŸ”‘ 3. é»˜è®¤è´¦å·å¯†ç ï¼ˆé¦–æ¬¡ç™»å½•ç”¨ï¼‰
é¦–æ¬¡è®¿é—®åå°ç®¡ç†é¡µé¢æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹é»˜è®¤è´¦å·å¯†ç ï¼š
- **ç”¨æˆ·å**ï¼š`douyin`
- **å¯†ç **ï¼š`douyin2025`

> âš ï¸ å®‰å…¨å»ºè®®ï¼šç™»å½•åä¿®æ”¹å¯†ç ã€‚

---

## ğŸš€ 4. è¿è¡Œæ–¹å¼ï¼ˆæ¨è Docker Composeï¼Œæ›´æ˜“ç»´æŠ¤ï¼‰


å°†ä¸‹æ–¹å‘½ä»¤ä¸­çš„ã€Œæœ¬åœ°è·¯å¾„ã€æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„ï¼Œç»ˆç«¯æ‰§è¡Œå³å¯ï¼š
```bash

### Armè®¾å¤‡è¯·ä½¿ç”¨ registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net:arm_0.1.1 ç‰ˆæœ¬é•œåƒ
### æ–¹å¼ä¸€ï¼šDocker å‘½ä»¤è¡Œ
docker run -d --restart=always \
  -v /ä½ çš„/æœ¬åœ°/æ”¶è—è§†é¢‘è·¯å¾„:/app/collect \
  -v /ä½ çš„/æœ¬åœ°/å–œæ¬¢è§†é¢‘è·¯å¾„:/app/favorite \
  -v /ä½ çš„/æœ¬åœ°/æ•°æ®åº“è·¯å¾„:/app/db \
  -v /ä½ çš„/æœ¬åœ°/åšä¸»è§†é¢‘è·¯å¾„:/app/uper \
  -p 10101:10101 \
  --name dysync2025 \
  registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net
# æ³¨æ„ï¼š-p åé¢çš„å®¹å™¨ç«¯å£å¿…é¡»ä¸º 10101ï¼ˆæºç å›ºå®šï¼‰


### æ–¹å¼äºŒï¼šDocker Compose è¿è¡Œï¼ˆæ¨èï¼‰
### Armè®¾å¤‡è¯·ä½¿ç”¨ registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net:arm_0.1.1 ç‰ˆæœ¬é•œåƒ
åˆ›å»º docker-compose.yml æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œæ›¿æ¢ã€Œæœ¬åœ°è·¯å¾„ã€åæ‰§è¡Œ docker-compose up -dï¼š

version: '3.8'

services:
  dysync:
    image: registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net
    container_name: dysync2025
    restart: always
    ports:
      - "10101:10101"
    volumes:
      - /volume1/docker/dysync/db:/app/db

      - /volume2/mediay/dysync:/app/collect
      - /volume2/mediay/dysync_fav:/app/favorite
      - /volume2/mediay/dysync_up:/app/uper
      # ä¸‹é¢æ˜¯å¤šè´¦å·è·¯å¾„æ˜ å°„ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰
      - /volume2/mediay/dysync2:/app/yeyeye  
      - /volume2/mediay/dysync2_fav:/app/yeyeye_fav  
      - /volume2/mediay/dysync2_up:/app/yeyeye_up
    # é…ç½®DNSæœåŠ¡å™¨ï¼ˆè§£å†³åŸŸåè§£æå¤±è´¥å¯¼è‡´çš„æ— æ³•è®¿é—®å¤–ç½‘ï¼‰
    network_mode: bridge
    dns:
      - 8.8.8.8  # Google DNS
      - 114.114.114.114  # å›½å†…DNS
      - 223.5.5.5 


```
## ğŸš€ 5. è½¯ä»¶æˆªå›¾

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/homepage.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/datalist.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/logs.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/set.png)