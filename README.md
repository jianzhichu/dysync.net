# dysync.net - æŠ–éŸ³åŒæ­¥å·¥å…·ï¼ˆæŠ–å°äº‘ï¼‰

`dysync.net` æ˜¯ä¸€æ¬¾åŸºäº **.NET Core ** å’Œ **Vue** å¼€å‘çš„å·¥å…·ï¼Œç”¨äºåŒæ­¥æŠ–éŸ³æ”¶è—å¤¹ã€ã€Œæˆ‘å–œæ¬¢ã€çš„è§†é¢‘åŠæŒ‡å®šåšä¸»ä½œå“ï¼Œæ”¯æŒå¤šè´¦å·åŒæ­¥ï¼Œå†…ç½®è§†é¢‘ä¿¡æ¯åˆ®å‰ŠåŠŸèƒ½ï¼ŒåŒæ­¥åçš„è§†é¢‘å¯ç›´æ¥åœ¨ Emby æˆ– Jellyfin ä¸­æ’­æ”¾ã€‚

> ğŸ”§ **é—®é¢˜åé¦ˆ**ï¼šå¦‚ä½¿ç”¨ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¿›Qç¾¤åé¦ˆï¼š759876963ï¼Œä¸ä¸€å®šåŠæ—¶å›å¤ï¼Œè§è°…ã€‚

---

## ğŸ“º Emby æ•ˆæœé¢„è§ˆ
![Embyæ’­æ”¾æ•ˆæœ](docs/emby.png)

---

## ğŸ“‹ ç›®å½•
- [dysync.net - æŠ–éŸ³åŒæ­¥å·¥å…·ï¼ˆæŠ–å°äº‘ï¼‰](#dysyncnet---æŠ–éŸ³åŒæ­¥å·¥å…·æŠ–å°äº‘)
  - [ğŸ“º Emby æ’­æ”¾æ•ˆæœé¢„è§ˆ](#-emby-æ’­æ”¾æ•ˆæœé¢„è§ˆ)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. è·å–æŠ–éŸ³å…³é”®ä¿¡æ¯ï¼ˆå¿…åšï¼åŒæ­¥æ ¸å¿ƒå‡­è¯ï¼‰](#1-è·å–æŠ–éŸ³å…³é”®ä¿¡æ¯å¿…åšåŒæ­¥æ ¸å¿ƒå‡­è¯)
    - [1.1 æå–æŠ–éŸ³ Cookie](#11-æå–æŠ–éŸ³-cookie)
    - [1.2 æå– `sec_user_id`ï¼ˆä¸ªäºº/æŒ‡å®šåšä¸»ï¼‰](#12-æå–-sec_user_idä¸ªäººæŒ‡å®šåšä¸»)
  - [2. è·¯å¾„æ˜ å°„è§„åˆ™ï¼ˆæ ¸å¿ƒï¼é”™é…ä¼šå¯¼è‡´æ— æ³•è®¿é—®/æ•°æ®ä¸¢å¤±ï¼‰](#2-è·¯å¾„æ˜ å°„è§„åˆ™æ ¸å¿ƒé”™é…ä¼šå¯¼è‡´æ— æ³•è®¿é—®æ•°æ®ä¸¢å¤±)
  - [3. é»˜è®¤è´¦å·å¯†ç ï¼ˆé¦–æ¬¡ç™»å½•ç”¨ï¼‰](#3-é»˜è®¤è´¦å·å¯†ç é¦–æ¬¡ç™»å½•ç”¨)
  - [4. è¿è¡Œæ–¹å¼ï¼ˆæ¨è Docker Composeï¼‰](#4-è¿è¡Œæ–¹å¼æ¨è-docker-compose)
    - [é•œåƒç‰ˆæœ¬](#é•œåƒç‰ˆæœ¬)
    - [æ„å»ºå‘½ä»¤ç¤ºä¾‹](#æ„å»ºå‘½ä»¤ç¤ºä¾‹)
      - [æ–¹å¼ä¸€ï¼šDocker å‘½ä»¤è¡Œ](#æ–¹å¼ä¸€docker-å‘½ä»¤è¡Œ)
    - [æ–¹å¼äºŒï¼šDocker Compose è¿è¡Œï¼ˆæ¨èï¼‰](#æ–¹å¼äºŒdocker-compose-è¿è¡Œæ¨è)
  - [ğŸš€ 5. è½¯ä»¶æˆªå›¾](#-5-è½¯ä»¶æˆªå›¾)
  - [ğŸš€ 5. å·²æœ‰åŠŸèƒ½ä¸è®¡åˆ’](#-5-å·²æœ‰åŠŸèƒ½ä¸è®¡åˆ’)

---

## 1. è·å–æŠ–éŸ³å…³é”®ä¿¡æ¯ï¼ˆå¿…åšï¼åŒæ­¥æ ¸å¿ƒå‡­è¯ï¼‰
Cookie åŠ `sec_user_id` æ˜¯åŒæ­¥åŠŸèƒ½çš„æ ¸å¿ƒï¼Œéœ€ä¸¥æ ¼æŒ‰æ­¥éª¤è·å–ï¼Œé¿å…é—æ¼æˆ–é”™è¯¯ã€‚

### 1.1 æå–æŠ–éŸ³ Cookie 
1. æ‰“å¼€ **æŠ–éŸ³ç½‘é¡µç‰ˆ** (https://www.douyin.com/) å¹¶ç™»å½•ç›®æ ‡è´¦å·ï¼›
2. è¿›å…¥ã€Œæˆ‘çš„æ”¶è—ã€é¡µé¢ï¼Œç¡®ä¿é¡µé¢åŠ è½½å®Œæˆï¼›
3. æŒ‰ `F12` æ‰“å¼€æµè§ˆå™¨ã€Œå¼€å‘è€…å·¥å…·ã€ï¼Œåˆ‡æ¢åˆ°ã€ŒNetwork (ç½‘ç»œ)ã€æ ‡ç­¾ï¼›
4. åˆ·æ–°é¡µé¢ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥ `v1/web/aweme/listcollection` ç­›é€‰è¯·æ±‚ï¼›
5. ç‚¹å‡»ä»»æ„ä¸€æ¡ç­›é€‰ç»“æœï¼Œåœ¨å³ä¾§ã€ŒHeaders (æ ‡å¤´)ã€ä¸­æ‰¾åˆ° `Cookie` å­—æ®µï¼Œ**å®Œæ•´å¤åˆ¶æ•´æ®µå†…å®¹**ï¼ˆä¸å¯åˆ å‡å­—ç¬¦ï¼‰ã€‚

![è·å–Cookieæ­¥éª¤](docs/getcookies.png)

### 1.2 æå–ä½ çš„`sec_user_id`
- **ä¸ªäºº sec_user_id**ï¼ˆåŒæ­¥è‡ªå·±å–œæ¬¢ç”¨ï¼‰ï¼š  
  1.è¿›å…¥è‡ªå·±çš„æŠ–éŸ³ä¸»é¡µï¼š
- æ–¹å¼ï¼šæŒ‰ `F12` ç‚¹å‡»`Network` æˆ–`ç½‘ç»œ` ç­›é€‰å™¨é‡Œé¢å¡«`web/user/following/list` ç„¶å æŸ¥çœ‹è¯·æ±‚çš„ `payload` æˆ–`è´Ÿè½½` å³å¯æ‰¾åˆ°`sec_user_id`;
  2.è¿›å…¥æŠ–éŸ³ä¸»é¡µåéšä¾¿ç‚¹ä¸€ä¸ªè‡ªå·±çš„ä½œå“ï¼Œç„¶åä½ çš„åå­—ï¼Œè¿›å…¥ç›®æ ‡åšä¸»ä¸»é¡µï¼›  
  æ–¹å¼ï¼šç›´æ¥å¤åˆ¶åœ°å€æ ä¸­ `user/` åˆ° `?from_tab_name` ä¸­é—´éƒ¨åˆ†å†…å®¹å³æ˜¯åšä¸»çš„ `sec_user_id`ï¼›

  ![è·å–Cookieæ­¥éª¤](docs/getmysecuid.png)

### 1.3 æå– åšä¸»çš„`sec_user_id`ä»¥åŠåšä¸»çš„uid
- **å¯¹äºæƒ³ä¸‹è½½åšä¸»è§†é¢‘ï¼Œä½†æ˜¯åˆä¸æƒ³å…³æ³¨åšä¸»ï¼Œéœ€è¦ç”¨åˆ°**
- 1.è¿›å…¥åšä¸»ä¸»é¡µï¼ŒæŒ‰`F12` ç‚¹å‡»`Network` æˆ–`ç½‘ç»œ` ç­›é€‰å™¨é‡Œé¢å¡«`/web/aweme/post` ç„¶ååˆ‡åˆ°`é¢„è§ˆ`æˆ–`preview` å±•å¼€ jsonæ•°æ®ç»“æœ æ‰¾åˆ°`aweme_list` ç„¶åéšä¾¿ç‚¹å¼€å…¶ä¸­ä¸€ä¸ªå­é¡¹ å³å¯æ‰¾åˆ°`author_user_id` è¿™ä¾¿æ˜¯åšä¸»çš„uid ã€‚åç»­åœ¨å…³æ³¨åˆ—è¡¨ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ éå…³æ³¨åšä¸»åŒæ­¥è§†é¢‘æ—¶å°†ä¼šè¦ç”¨åˆ°ã€‚
 ![è·å–Cookieæ­¥éª¤](docs/getuperuid.png)
---

## 2. è·¯å¾„æ˜ å°„è§„åˆ™ï¼ˆæ ¸å¿ƒï¼é”™é…ä¼šå¯¼è‡´æ— æ³•è®¿é—®/æ•°æ®ä¸¢å¤±ï¼‰
ä¸ºå®ç°è§†é¢‘åœ¨ Emby/Jellyfin ä¸­æ­£å¸¸æ’­æ”¾åŠæ•°æ®æŒä¹…åŒ–ï¼Œéœ€æ­£ç¡®é…ç½®æœ¬åœ°è·¯å¾„ä¸å®¹å™¨è·¯å¾„çš„æ˜ å°„ï¼š

| å­˜å‚¨ç±»å‹     | å®¹å™¨å†…è·¯å¾„      | æœ¬åœ°è·¯å¾„é…ç½®è¦æ±‚                                                      | ç”¨é€”è¯´æ˜                   |
| ------------ | --------------- | --------------------------------------------------------------------- | -------------------------- |
| ä¸ªäººæ”¶è—è§†é¢‘ | `/app/collect`  | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå¦‚ NASï¼š`/volume1/æŠ–éŸ³/æ”¶è—`ã€ç”µè„‘ï¼š`D:/æŠ–éŸ³/æ”¶è—`ï¼‰  | å­˜å‚¨åŒæ­¥åçš„æ”¶è—è§†é¢‘       |
| ä¸ªäººå–œæ¬¢è§†é¢‘ | `/app/favorite` | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå»ºè®®ä¸æ”¶è—è§†é¢‘è·¯å¾„åŒºåˆ†ï¼Œå¦‚ `/volume1/æŠ–éŸ³/å–œæ¬¢`ï¼‰     | å­˜å‚¨åŒæ­¥åçš„ã€Œæˆ‘å–œæ¬¢ã€è§†é¢‘ |
| å›¾æ–‡è§†é¢‘     | `/app/images`   | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå»ºè®®ä¸æ”¶è—è§†é¢‘è·¯å¾„åŒºåˆ†ï¼Œå¦‚ `/volume1/æŠ–éŸ³/å›¾æ–‡è§†é¢‘`ï¼‰ | å­˜å‚¨åŒæ­¥åçš„ã€Œå›¾æ–‡è§†é¢‘ã€   |
| æŒ‡å®šåšä¸»è§†é¢‘ | `/app/uper`     | æ˜ å°„åˆ°æœ¬åœ°ç›®å½•ï¼ˆå¦‚ `/volume1/æŠ–éŸ³/åšä¸»ä½œå“`ï¼‰                         | å­˜å‚¨åŒæ­¥åçš„åšä¸»è§†é¢‘       |
| æ•°æ®åº“æ–‡ä»¶   | `/app/db`       | æ˜ å°„åˆ°æœ¬åœ°ç¨³å®šç›®å½•ï¼ˆå¦‚ `/volume1/æŠ–éŸ³/å·¥å…·æ•°æ®åº“`ï¼‰                   | æŒä¹…åŒ–é…ç½®ã€åŒæ­¥è®°å½•       |

> âœ… **å…³é”®æ³¨æ„**ï¼š  
> 1. æœ¬åœ°è·¯å¾„éœ€ä¸åç»­åå°ã€ŒæŠ–éŸ³æˆæƒã€é¡µé¢é…ç½®çš„ã€Œæ–‡ä»¶å­˜å‚¨è·¯å¾„ã€**å®Œå…¨ä¸€è‡´**ï¼›  
> 2. æœªé…ç½®è·¯å¾„æ˜ å°„æ—¶ï¼Œæ–‡ä»¶ä»…å­˜äºå®¹å™¨å†…éƒ¨ï¼ŒEmby/Jellyfin æ— æ³•è®¿é—®ï¼Œä¸”å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ã€‚

![è·¯å¾„é…ç½®ç¤ºä¾‹](docs/auth2.png)

![è·¯å¾„é…ç½®ç¤ºä¾‹](docs/followset.png)

---

## 3. é»˜è®¤è´¦å·å¯†ç ï¼ˆé¦–æ¬¡ç™»å½•ç”¨ï¼‰
é¦–æ¬¡è®¿é—®åå°ç®¡ç†é¡µé¢æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹é»˜è®¤è´¦å·å¯†ç ï¼š
- **ç”¨æˆ·å**ï¼š`douyin`
- **å¯†ç **ï¼š`douyin2025`

> âš ï¸ **å®‰å…¨å»ºè®®**ï¼šç™»å½•åä¿®æ”¹å¯†ç ã€‚

---

## 4. è¿è¡Œæ–¹å¼ï¼ˆæ¨è Docker Composeï¼‰

### é•œåƒç‰ˆæœ¬

| é•œåƒæ ‡ç­¾          | æ¶æ„           |
| ----------------- | -------------- |
| `beta_1.7.0`      | x86_64 (amd64) |
| `arm_1.7.0`       | ARM64          |

### æœ€æ–°é•œåƒæŸ¥çœ‹
[é•œåƒåˆ—è¡¨](http://nas.synology2023.online:10108/api/docker/dysync/1)
### æ„å»ºå‘½ä»¤ç¤ºä¾‹

å°†ä¸‹æ–¹å‘½ä»¤ä¸­çš„ã€Œæœ¬åœ°è·¯å¾„ã€æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„ï¼Œç»ˆç«¯æ‰§è¡Œå³å¯ï¼š

#### æ–¹å¼ä¸€ï¼šDocker å‘½ä»¤è¡Œ
```bash
docker run -d --restart=always \
  -v /opt/dysync/coll:/app/collect \
  -v /opt/dysync/favorite:/app/favorite \
  -v /opt/dysync/db:/app/db \
  -v /opt/dysync/imgs:/app/images \
  -v /opt/dysync/uper:/app/uper \
  -p 10103:10101 \
  --name dysync2025 \
  ccr.ccs.tencentyun.com/jianzhichu/dysync:beta_1.7.0
# æ³¨æ„ï¼š-p åé¢çš„å®¹å™¨ç«¯å£,å¯ä»¥ç”¨ç¯å¢ƒå˜é‡ç±»ä¼¼ï¼šASPNETCORE_URLS = http://+:10108 æŒ‡å®š
```


### æ–¹å¼äºŒï¼šDocker Compose è¿è¡Œï¼ˆæ¨èï¼‰
åˆ›å»º docker-compose.yml æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œæ›¿æ¢ã€Œæœ¬åœ°è·¯å¾„ã€åæ‰§è¡Œ docker-compose up -dï¼š

```bash

version: '3.8'

services:
  dysync:
    image: ccr.ccs.tencentyun.com/jianzhichu/dysync:beta_1.7.0
    container_name: dysync2025  # å®¹å™¨åç§°
    restart: unless-stopped # å§‹ç»ˆé‡å¯å®¹å™¨ï¼Œé™¤éå®¹å™¨è¢«æ‰‹åŠ¨åœæ­¢æˆ–DockeræœåŠ¡åœæ­¢
    ports:
      - "10101:10101" 
    volumes:
      # åŸºç¡€è·¯å¾„æ˜ å°„
      - /vol2/1000/media/dysync/db:/app/db          # æ•°æ®åº“ç›®å½•ï¼ˆæŒä¹…åŒ–é…ç½®å’ŒåŒæ­¥è®°å½•ï¼‰
      - /vol2/1000/media/dysync/dy1/coll:/app/collect   # ä¸ªäººæ”¶è—è§†é¢‘ç›®å½•
      - /vol2/1000/media/dysync/dy1/fav:/app/favorite  # ä¸ªäººå–œæ¬¢è§†é¢‘ç›®å½•
      - /vol2/1000/media/dysync/dy1/imgv:/app/images    # å›¾æ–‡è§†é¢‘ç›®å½•
      - /vol2/1000/media/dysync/dy1/up:/app/uper      # æŒ‡å®šåšä¸»è§†é¢‘ç›®å½•
      
      # å¤šè´¦å·è·¯å¾„æ˜ å°„ç¤ºä¾‹ï¼ˆå¯é€‰ï¼Œéœ€åœ¨åå°å¯¹åº”è´¦å·é…ç½®ä¸­æŒ‡å®šå­˜å‚¨è·¯å¾„ï¼‰
      - /vol2/1000/media/dysync/dy2/collect:/app/collect2 
      - /vol2/1000/media/dysync/dy2/fav:/app/favorite2  
      - /vol2/1000/media/dysync/dy2/imgv:/app/images2
	  - /vol2/1000/media/dysync/dy2/up:/app/uper

    network_mode: bridge
    dns:
      - 8.8.8.8  # Google DNSï¼ˆæå‡æµ·å¤–è®¿é—®ç¨³å®šæ€§ï¼‰
      - 114.114.114.114  # å›½å†…DNSï¼ˆæå‡å›½å†…è®¿é—®ç¨³å®šæ€§ï¼‰
      - 223.5.5.5  # é˜¿é‡Œäº‘DNSï¼ˆå¤‡ç”¨ï¼‰

```

## ğŸš€ 5. è½¯ä»¶æˆªå›¾

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/homepage.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/homepage_night.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/datalist.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/auth.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/logs.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/set.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/player.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/follows.png)
## ğŸš€ 5. å·²æœ‰åŠŸèƒ½ä¸è®¡åˆ’


1. âœ… æ”¯æŒå¤šè´¦å·åŒæ­¥ï¼ˆæ¯ä¸ªè´¦å·å¯å•ç‹¬é…ç½®å­˜å‚¨è·¯å¾„ï¼‰

2. âœ… æ”¶è—çš„è§†é¢‘

3. âœ… å–œæ¬¢çš„è§†é¢‘ï¼ˆç‚¹èµçš„è§†é¢‘ï¼‰

4. âœ… å›¾æ–‡è§†é¢‘ï¼ˆéœ€è¦å°†å›¾ç‰‡ + mp3 åˆæˆè§†é¢‘ï¼‰

5. âœ… æŒ‡å®šåšä¸»çš„è§†é¢‘,å¯é…ç½®æ˜¯å¦å•ç‹¬å­˜æ”¾ä¸€ä¸ªæ€»æ–‡ä»¶å¤¹ï¼Œæ˜¯å¦ç›´æ¥ç”¨è§†é¢‘æ ‡é¢˜åšæ–‡ä»¶å

6. âœ… å¢åŠ æ¸…é™¤æ—¥å¿—ï¼ˆé˜²æ­¢å®¹å™¨è¢«æ—¥å¿—å ç”¨å¤ªå¤šç©ºé—´ï¼Œå¯é…ç½®ä¿ç•™å¤©æ•°ï¼‰

7. âœ… å°†ç½‘ç«™åç§°æ”¹æˆ "æŠ–å°äº‘" çµæ„Ÿæ¥æºäºå“ªå’ç”µå½± é©®é—¨çš„é‚£ä¸ªå°äº‘äº‘

8. âœ… Cookie è¿‡æœŸæé†’ï¼Œåœ¨DéŸ³æˆæƒé¡µå¯æŸ¥çœ‹

9. âœ… é‡å¤è§†é¢‘å»é‡ï¼ˆä¸€ä¸ªè§†é¢‘åŒæ—¶å±äºæ”¶è—è§†é¢‘ã€å–œæ¬¢çš„è§†é¢‘æˆ–æŒ‡å®šçš„åšä¸»ä½œå“ï¼‰

10. âœ… åœ¨åŒæ­¥è®°å½•é¡µé¢ä¸­ç›´æ¥æ’­æ”¾è§†é¢‘

11. âœ… å…³æ³¨åˆ—è¡¨åŒæ­¥ã€‚

11. âœ… é€‰ä¸­è®°å½•ï¼Œæ‰¹é‡é‡æ–°åŒæ­¥ã€‚ä»¥åŠåˆ†äº«ï¼ˆæ¯”è¾ƒç®€é™‹ï¼‰

12. âœ… å…³æ³¨åˆ—è¡¨æ”¯æŒæ–°å¢ï¼Œéå…³æ³¨çš„åšä¸»


