# dysync.net - æŠ–éŸ³åŒæ­¥å·¥å…·ï¼ˆæˆ‘æ”¶è—çš„ã€æˆ‘å–œæ¬¢çš„ï¼ŒæŒ‡å®šåšä¸»ï¼‰

`dysync.net` æ˜¯ä¸€æ¬¾åŸºäº **.NET Core 6.0** å’Œ **Vue** å¼€å‘çš„å·¥å…·ï¼Œç”¨äºåŒæ­¥æŠ–éŸ³æ”¶è—å¤¹ä»¥åŠæˆ‘å–œæ¬¢çš„è§†é¢‘ï¼Œè§£å†³ä¸ªäººæ”¶è—å’Œå–œæ¬¢çš„è§†é¢‘å®¹æ˜“å¤±æ•ˆçš„é—®é¢˜ã€‚æ”¯æŒå¤šè´¦å·åŒæ­¥ï¼Œå¹¶å·²é¢„è®¾åˆ®å‰Šä¿¡æ¯ï¼ŒåŒæ­¥åçš„è§†é¢‘å¯ç›´æ¥åœ¨ Emby æˆ– Jellyfin ä¸­æ’­æ”¾ã€‚

> å¦‚åœ¨ä½¿ç”¨ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æ·»åŠ  QQï¼š279225040 è¿›è¡Œå’¨è¯¢ã€‚

---

#### å…ˆæ”¾ä¸€å¼ Embyçš„å›¾
![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/emby.png)

### 1. è·å–æŠ–éŸ³ Cookie ä»¥åŠç”¨æˆ·sec_user_d

Cookie æ˜¯åŒæ­¥åŠŸèƒ½çš„å…³é”®ï¼Œè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è·å–ï¼š

1.  æ‰“å¼€ **æŠ–éŸ³ç½‘é¡µç‰ˆ** (https://www.douyin.com/) å¹¶ç™»å½•ã€‚
2.  è¿›å…¥ä½ çš„**æ”¶è—å¤¹**é¡µé¢ã€‚
3.  æŒ‰ `F12` æ‰“å¼€æµè§ˆå™¨ã€Œå¼€å‘è€…å·¥å…·ã€ï¼Œåˆ‡æ¢åˆ°ã€ŒNetwork (ç½‘ç»œ)ã€æ ‡ç­¾ã€‚
4.  åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ `v1/web/aweme/listcollection`ã€‚
5.  ç‚¹å‡»ä»»æ„ä¸€æ¡ç­›é€‰å‡ºçš„è¯·æ±‚ï¼Œåœ¨å³ä¾§ã€ŒHeaders (æ ‡å¤´)ã€ä¸­æ‰¾åˆ° `Cookie` å­—æ®µï¼Œ**å®Œæ•´å¤åˆ¶**å…¶å†…å®¹ã€‚

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/getcookies.png)
![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/secUserId.png)

6.  è¿›å…¥åšä¸»ä¸»é¡µæµè§ˆå™¨åœ°å€æ ä¸­çš„ä¾¿æ˜¯åšä¸»çš„sec_user_idï¼Œå¤åˆ¶å…¶å€¼ã€‚ä¹Ÿå¯ä»¥åœ¨åšä¸»ä¸»é¡µæŒ‰ `F12` æ‰“å¼€ã€Œå¼€å‘è€…å·¥å…·ã€ï¼Œåˆ‡æ¢åˆ°ã€ŒNetwork (ç½‘ç»œ)ã€æ ‡ç­¾ï¼Œç‚¹å‡»ä»»æ„ä¸€æ¡è¯·æ±‚ï¼Œåœ¨å³ä¾§ã€ŒHeaders (æ ‡å¤´)ã€ä¸­æ‰¾åˆ° `sec_user_id` å­—æ®µï¼Œå¤åˆ¶å…¶å€¼ã€‚
![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/upers-uid.png)
### 2. è·¯å¾„æ˜ å°„è§„åˆ™

ä¸ºäº†æ–¹ä¾¿ç®¡ç†å’Œæ’­æ”¾ï¼Œè¯·ç†è§£å¹¶æ­£ç¡®é…ç½®è·¯å¾„æ˜ å°„ï¼š
![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/upersuidset.png)

*   **è§†é¢‘å­˜å‚¨è·¯å¾„**ï¼šå®¹å™¨å†…è·¯å¾„ä¸º `/app/collect`ã€‚ä½ éœ€è¦å°†æ­¤è·¯å¾„æ˜ å°„åˆ°ä½ æœ¬åœ°çš„ä¸€ä¸ªç›®å½•ï¼ˆå¦‚ NAS æˆ–ç”µè„‘ç¡¬ç›˜ï¼‰ã€‚**è¿™ä¸ªæœ¬åœ°è·¯å¾„å¿…é¡»ä¸åç»­åœ¨ã€ŒæŠ–éŸ³æˆæƒã€é¡µé¢é…ç½®çš„ã€Œæ–‡ä»¶å­˜å‚¨è·¯å¾„ã€å®Œå…¨ä¸€è‡´**ã€‚
*   **æ•°æ®åº“å­˜å‚¨è·¯å¾„**ï¼šå®¹å™¨å†…è·¯å¾„ä¸º `/app/db`ã€‚æ˜ å°„æ­¤è·¯å¾„ç”¨äºæŒä¹…åŒ–å·¥å…·çš„é…ç½®å’ŒåŒæ­¥è®°å½•ï¼Œé˜²æ­¢å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ã€‚
*   **å¤šè´¦å·é…ç½®**ï¼šå¦‚éœ€åŒæ­¥å¤šä¸ªè´¦å·ï¼Œéœ€ä¸ºæ¯ä¸ªè´¦å·æŒ‡å®šä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨å†…è·¯å¾„ï¼ˆå¦‚ `/app/user1`, `/app/user2`ï¼‰ï¼Œå¹¶åˆ†åˆ«è¿›è¡Œæ˜ å°„ã€‚

> **é‡è¦**ï¼šå¦‚æœä¸è¿›è¡Œè·¯å¾„æ˜ å°„ï¼Œæ‰€æœ‰æ–‡ä»¶å°†ä¿å­˜åœ¨å®¹å™¨å†…éƒ¨ï¼Œæ— æ³•ç›´æ¥åœ¨ EMBY/JF ä¸­è®¿é—®ã€‚

---

## ğŸ”‘ é»˜è®¤è´¦å·å¯†ç 

é¦–æ¬¡ç™»å½•åå°ç®¡ç†é¡µé¢æ—¶ä½¿ç”¨ï¼š

*   **ç”¨æˆ·å**ï¼š`douyin`
*   **å¯†ç **ï¼š`douyin2025`

> **å»ºè®®**ï¼šç™»å½•åè¯·ä¿®æ”¹å¯†ç ï¼Œä¿éšœè´¦å·å®‰å…¨ã€‚

---

## ğŸš€ è¿è¡Œæ–¹å¼

ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä»»ä¸€æ–¹å¼å¯åŠ¨æœåŠ¡ã€‚**æ¨èä½¿ç”¨ Docker Compose**ï¼Œå› ä¸ºå®ƒæ›´æ˜“äºç®¡ç†å’Œç»´æŠ¤ã€‚

### æ–¹å¼ä¸€ï¼šDocker å‘½ä»¤è¡Œ

å°†ä¸‹æ–¹å‘½ä»¤ä¸­çš„æœ¬åœ°è·¯å¾„æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­æ‰§è¡Œã€‚

```bash
docker run -d --restart=always \
  -v /ä½ çš„/æœ¬åœ°/è§†é¢‘1/è·¯å¾„:/app/collect \
  -v /ä½ çš„/æœ¬åœ°/è§†é¢‘2/è·¯å¾„:/app/favorite \
  -v /ä½ çš„/æœ¬åœ°/æ•°æ®åº“/è·¯å¾„:/app/db \
  -v /ä½ çš„/æœ¬åœ°/æ•°æ®åº“/è·¯å¾„:/app/uper \
  -p 10101:10101 \
  --name dysync2025 \
  registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net

###-p åé¢çš„ç¬¬äºŒä¸ªç«¯å£ å¿…é¡»10101ï¼ˆæºç é‡Œé¢å†™æ­»äº†ï¼‰
```

### æ–¹å¼ 2ï¼šDocker-Compose è¿è¡Œï¼ˆæ¨èï¼‰

```yml
version: '3.8'

services:
  dysync:
    image: registry.cn-hangzhou.aliyuncs.com/jianzhichu/dysync.net
    container_name: dysync2025  # å®¹å™¨åç§°ï¼Œå¯è‡ªå®šä¹‰
    restart: always  # å®¹å™¨å¼‚å¸¸é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯
    ports:
      - "10101:10101"  # ç«¯å£æ˜ å°„ï¼šæœ¬åœ°ç«¯å£:å®¹å™¨ç«¯å£ï¼ˆå®¹å™¨ç«¯å£10101ä¸å¯ä¿®æ”¹ï¼‰
    volumes:
      # ç¬¬ä¸€ä¸ªè´¦å·çš„æ”¶è—çš„è§†é¢‘å­˜å‚¨è·¯å¾„ï¼ˆæœ¬åœ°è·¯å¾„:å®¹å™¨è·¯å¾„ï¼‰
      - /æœ¬åœ°è§†é¢‘è·¯å¾„1:/app/collect
      # ç¬¬ä¸€ä¸ªè´¦å·çš„å–œæ¬¢çš„è§†é¢‘å­˜å‚¨è·¯å¾„ï¼ˆæœ¬åœ°è·¯å¾„:å®¹å™¨è·¯å¾„ï¼‰
      - /æœ¬åœ°è§†é¢‘è·¯å¾„1:/app/favorite
      # æ•°æ®åº“å­˜å‚¨è·¯å¾„
      - /æœ¬åœ°æ•°æ®åº“è·¯å¾„:/app/db
      - /æŒ‡å®šåšä¸»è§†é¢‘è·¯å¾„:/app/uper
      # ç¬¬äºŒä¸ªè´¦å·çš„è§†é¢‘å­˜å‚¨è·¯å¾„ï¼ˆå¤šè´¦å·ç¤ºä¾‹ï¼Œéœ€åœ¨åå°å¯¹åº”é…ç½®ï¼‰
      - /æœ¬åœ°è§†é¢‘è·¯å¾„2:/app/yeyeye
    # ï¼ˆå¯é€‰ï¼‰å¦‚éœ€æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå–æ¶ˆä¸‹æ–¹æ³¨é‡Šå¹¶é…ç½®
    # environment:
    #   - ENV_VAR_NAME=value
    # ï¼ˆå¯é€‰ï¼‰å¦‚éœ€è‡ªå®šä¹‰ç½‘ç»œï¼Œå–æ¶ˆä¸‹æ–¹æ³¨é‡Šå¹¶é…ç½®
    # networks:
    #   - custom_network

# ï¼ˆå¯é€‰ï¼‰è‡ªå®šä¹‰ç½‘ç»œé…ç½®
# networks:
#   custom_network:
#     driver: bridge

```
### æ–¹å¼ 3ï¼šè‡ªå·±ç¼–è¯‘è¿è¡Œ
   ##### å‰ç«¯æºç åœ¨/appé‡Œé¢
```
yarn install
yarn dev
yarn run build

### è¿è¡Œå¯èƒ½æŠ¥é”™ï¼ŒlessåŒ…å¦‚æœæŠ¥é”™ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯
 yarn remove less && yarn add less@4.1.3 -D

```
 ##### åå°ç¼–è¯‘è¦å…ˆå®‰è£….netcoreç¯å¢ƒ netcore sdk
 ```bash
 dotnet --version  # è¾“å‡ºå®‰è£…çš„ .NET Core ç‰ˆæœ¬ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ
 dotnet build
 dotnet build -c Release  # ç”Ÿæˆæ–‡ä»¶åœ¨ bin/Release/netX.X/ ç›®å½•

### è°ƒè¯•æ¨¡å¼è¿è¡Œ
dotnet run
 ```
 
## è½¯ä»¶æˆªå›¾
![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/homepage.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/datalist.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/logs.png)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](docs/set.png)